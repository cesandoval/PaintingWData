extends layout

block pageTitle

    script(src="/javascripts/progressWidget.js")

    .container.spacing-large(id='progress-widget')
        .row.spacing-large
        h1 progress widget, click to start polling
        .row-spacer
            div.text-center
                    button.btn.btn-block.btn-gray.btn-jumbotron(id='PollingToggle', onclick="toggleProgressWidget()") Start Polling

        h2 jobs in progress
        .row-spacer
        div(id='jobList')
            if(currentJobs && currentJobs.length > 0)
                span this is some text
                ul
                    each job in currentJobs
                        +progressBar(...job)


    mixin progressBar(id, title, numerator, denominator)
        -var percentage = (((numerator/denominator)*100).floor()).toString() + "%";
        -var width = "width: " + percentage;
        li.job-container
            span = "id: " id + " title: " + title
            .progress-container
                .progress-bar.progress-bar-success(role='progressbar',aria-valuenow="40",
                aria-valuemin="0", aria-valuemax="100", style="#{width}")
                    = numerator + "/" + denominator

        

    